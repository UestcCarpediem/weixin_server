(function(e){function t(t){for(var s,l,i=t[0],r=t[1],c=t[2],d=0,p=[];d<i.length;d++)l=i[d],n[l]&&p.push(n[l][0]),n[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,i=1;i<a.length;i++){var r=a[i];0!==n[r]&&(s=!1)}s&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},n={app:0},o=[];function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=r;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"026c":function(e,t,a){},"0a31":function(e,t,a){},"227c":function(e,t,a){"use strict";var s=a("369e"),n=a.n(s);n.a},"2a56":function(e,t,a){},3522:function(e,t,a){},"369e":function(e,t,a){},5189:function(e,t,a){"use strict";var s=a("5394"),n=a.n(s);n.a},5394:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=a("bc3a"),o=a.n(n),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r={},c=r,u=(a("5c0b"),a("2877")),d=Object(u["a"])(c,l,i,!1,null,null,null);d.options.__file="App.vue";var p=d.exports,m=a("8c4f"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticClass:"index-box"},[s("el-aside",{attrs:{width:"asideWidth"}},[s("div",{staticClass:"logo"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],attrs:{src:a("b640"),alt:"ELementUI",width:"160",height:"40"}})]),s("menus",{attrs:{isCollapse:e.isCollapse}})],1),s("el-container",[s("el-header",[s("headers")],1),s("el-main",[e.isRouterAlive?s("router-view"):e._e()],1)],1)],1)},f=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"menu-nav",attrs:{router:"","default-active":e.currentPath,"background-color":"#20222A","text-color":"rgba(255,255,255,.8)","active-text-color":"#ffd04b",collapse:e.isCollapse}},[a("el-menu-item",{attrs:{index:"/console"}},[a("i",{staticClass:"el-icon-location"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("主页")])]),a("el-menu-item",{attrs:{index:"/users"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("待审核")])]),a("el-menu-item",{attrs:{index:"/articles"}},[a("i",{staticClass:"el-icon-document"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("已审核")])])],1)},g=[],v={props:["isCollapse"],data:function(){return{currentPath:location.pathname}}},w=v,y=(a("a64c"),Object(u["a"])(w,b,g,!1,null,"74462e0f",null));y.options.__file="menus.vue";var _=y.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-box"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("button",{staticClass:"btn-tool",attrs:{title:"折叠"},on:{click:e.collapse}},[a("i",{staticClass:"el-icon-d-arrow-left"})]),a("button",{staticClass:"btn-tool",attrs:{title:"刷新"},on:{click:e.refresh}},[a("i",{staticClass:"el-icon-refresh"})]),a("button",{staticClass:"btn-tool",attrs:{title:"全屏"},on:{click:e.Utils.fullScreen}},[a("i",{staticClass:"el-icon-rank"})])]),a("el-col",{attrs:{span:6,align:"right"}},[a("span",[e._v(e._s(e.Utils.todayDate()))]),a("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.username)),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("退出登录")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"便签",width:"400px","close-on-click-modal":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.saveNotes}},[a("el-input",{attrs:{type:"textarea",rows:7,placeholder:"请输入内容"},model:{value:e.notes,callback:function(t){e.notes=t},expression:"notes"}})],1)],1)},C=[],k=(a("a481"),{inject:["reload"],data:function(){return{isCollapse:!1,dialogVisible:!1,notes:localStorage.getItem("notes")||"便签中的内容会存储在本地，这样即便你关掉了浏览器，在下次打开时，依然会读取到上一次的记录。是个非常小巧实用的本地备忘录"}},methods:{collapse:function(){this.$store.commit("switchCollapse")},refresh:function(){this.reload()},saveNotes:function(){localStorage.setItem("notes",this.notes)},handleCommand:function(e){switch(e){case"logout":this.$router.replace({path:"/login"});break}}},computed:{username:function(){var e=JSON.parse(sessionStorage.getItem("user")),t=e.username;return t.toUpperCase()}}}),F=k,$=(a("5189"),Object(u["a"])(F,x,C,!1,null,"6914ea8c",null));$.options.__file="header.vue";var S=$.exports,j={provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},components:{Menus:_,Headers:S},methods:{reload:function(){var e=this;this.isRouterAlive=!1,this.$nextTick(function(){e.isRouterAlive=!0})}},computed:{isCollapse:function(){return this.$store.state.isCollapse},asideWidth:function(){return this.$store.state.isCollapse?"auto":"200px"}}},T=j,O=(a("ca9c"),Object(u["a"])(T,h,f,!1,null,null,null));O.options.__file="Index.vue";var N=O.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"header_container"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"info-box"},[a("span",{staticClass:"info-box-icon bg-aqua",on:{click:function(t){e.statAll(0)}}},[a("i",{staticClass:"el-icon-edit"})]),a("div",{staticClass:"info-box-content"},[a("span",{staticClass:"info-box-text"},[e._v("总预约数：")]),a("span",{staticClass:"info-box-number"},[e._v(e._s(e.total))])])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"info-box"},[a("span",{staticClass:"info-box-icon bg-aqua",on:{click:function(t){e.statAll(0)}}},[a("i",{staticClass:"el-icon-edit"})]),a("div",{staticClass:"info-box-content"},[a("span",{staticClass:"info-box-text"},[e._v("待审核数：")]),a("span",{staticClass:"info-box-number"},[e._v(e._s(e.pending))])])])])],1),e._m(0)])},R=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"echarts-box"},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("f912")}})])}],U=(a("7f7f"),a("313e")),D=a.n(U),I={title:{text:"这是一个演示用例",textStyle:{color:"#666",fontSize:18,fontWeight:"normal"},show:!0,x:"center"},grid:{left:"5%",right:"10%",bottom:"15%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["出货量","进货量","售出量","测试一","测试二","测试三","测试四","测试五","测试六","测试七","测试八","测试九","测试十","复试一","复试二","复试三","复试四","复试五","复试六","复试七","复试八","复试九","复试十","补位一","补位二","补位三","补位四","补位五","补位六","补位七"],selected:{"出货量":!0,"进货量":!1,"售出量":!0,"测试一":!1,"测试二":!1,"测试三":!1,"测试四":!1,"测试五":!0,"测试六":!1,"测试七":!1,"测试八":!1,"测试九":!1,"测试十":!1,"复试一":!1,"复试二":!0,"复试三":!1,"复试四":!1,"复试五":!1,"复试六":!1,"复试七":!1,"复试八":!1,"复试九":!1,"复试十":!1,"补位一":!1,"补位二":!1,"补位三":!1,"补位四":!1,"补位五":!1,"补位六":!1,"补位七":!1},show:!0,type:"scroll",orient:"vertical",right:15,top:45,backgroundColor:"#eee",padding:10},toolbox:{feature:{myTool:{show:!0,title:"自定义扩展方法",icon:"image://http://echarts.baidu.com/images/favicon.png",onclick:function(){}},magicType:{type:["line","bar"],title:{line:"折线图",bar:"柱状图"}},restore:{},saveAsImage:{}}},xAxis:{name:"( 月份 )",type:"category",axisLabel:{rotate:30},data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},yAxis:{name:"( 这是Y轴名称：数值 )",nameLocation:"middle",nameGap:60,nameRotate:90,type:"value",axisLine:{show:!0,lineStyle:{type:"solid"}},splitLine:{show:!0,lineStyle:{color:"#ddd",type:"solid"}}},dataZoom:[{type:"slider",start:0,end:50,bottom:0,show:!0}],series:[{name:"出货量",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"进货量",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"line",label:{show:!0}},{name:"售出量",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试一",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试二",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试三",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试四",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试五",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试六",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试七",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试八",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试九",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"测试十",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试一",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试二",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试三",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试四",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试五",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试六",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试七",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试八",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试九",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"复试十",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位一",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位二",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位三",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位四",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位五",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位六",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}},{name:"补位七",data:[820,932,901,934,1290,1330,1320,901,934,1290,1330,1320],type:"bar",label:{show:!0}}]},P=I,z={data:function(){return{total:0,pending:0}},mounted:function(){this.getDataCount(),this.drawEcharts()},methods:{getDataCount:function(){var e=this;this.$http.post("/accounting/getRecordCount").then(function(t){e.total=t.data.data.dataTotal,e.pending=t.data.data.dataPending})},drawEcharts:function(){var e=this,t=D.a.init(document.getElementById("echarts"));P.toolbox.feature.myTool.onclick=function(){e.$message({type:"info",message:"您刚刚点击了自定义工具按钮！"})},t.setOption(P),t.on("click",function(t){e.$message({type:"info",message:"您点击了： ".concat(t.name," - ").concat(t.seriesName," - ").concat(t.data)})})}}},A=z,V=(a("6573"),Object(u["a"])(A,E,R,!1,null,"6dc3403f",null));V.options.__file="Console.vue";var B=V.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-box"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"tool-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.handleAdd}},[e._v("新增")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.mulDelete}},[e._v("批量删除")])],1)])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期",width:"180"}}),a("el-table-column",{attrs:{prop:"time",label:"时间",width:"180"}}),a("el-table-column",{attrs:{prop:"Name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"手机",width:"180"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.checked?"已审核":"未审核")+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("查看详情")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:400}}),a("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.userFormVisible},on:{"update:visible":function(t){e.userFormVisible=t},close:function(t){e.resetForm("userForm")}}},[a("el-form",{ref:"userForm",attrs:{model:e.user,rules:e.rules}},[a("el-form-item",{attrs:{label:"照片","label-width":"100px"}},[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.user.photoUrl}})]),a("el-form-item",{attrs:{label:"姓名","label-width":"100px"}},[a("label",[e._v(e._s(e.user.Name))])]),a("el-form-item",{attrs:{label:"身份证号","label-width":"100px"}},[a("label",[e._v(e._s(e.user.IDcard))])]),a("el-form-item",{attrs:{label:"手机","label-width":"100px"}},[a("label",[e._v(e._s(e.user.phoneNum))])]),a("el-form-item",{attrs:{label:"到访日期","label-width":"100px"}},[a("label",[e._v(e._s(e.user.date))])]),a("el-form-item",{attrs:{label:"到访时间","label-width":"100px"}},[a("label",[e._v(e._s(e.user.time))])]),a("el-form-item",{attrs:{label:"到访事由","label-width":"100px"}},[a("label",[e._v(e._s(e.user.reason))])]),a("el-form-item",{attrs:{label:"状态","label-width":"100px"}},[e.user.checked?a("label",[e._v("已审核")]):e._e(),a("label",[e._v("待审核")])]),a("el-form-item",{attrs:{label:"拒绝理由","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"拒绝时填写"},model:{value:e.failedReason,callback:function(t){e.failedReason=t},expression:"failedReason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.submitUser(e.user._id,!1)}}},[e._v("不通过")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitUser(e.user._id,!0)}}},[e._v("通过")])],1)],1)],1)},q=[],L=(a("34ef"),a("4917"),a("28a5"),a("f751"),{data:function(){return{ruleForm:{coverUrl:"",coverFile:""},pageNum:1,users:[],user:{id:"",date:"",name:"",phone:"",address:"",status:0},failedReason:"",userBackup:Object.assign({},this.user),multipleSelection:[],userFormVisible:!1,dialogTitle:"",rowIndex:9999,rules:{}}},mounted:function(){this.getUsers()},methods:{imgUrlToFile:function(e){var t=this,a=e,s=new Image;s.crossOrigin="*",s.onload=function(){var e=t.getBase64Image(s),a=t.base64toBlob(e),n=t.getFileName(t.ruleForm.coverUrl);t.ruleForm.coverFile=t.blobToFile(a,n)},s.src=a},getBase64Image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var s=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase(),n=t.toDataURL("image/"+s);return n},base64toBlob:function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,o=new Uint8Array(n);while(n--)o[n]=s.charCodeAt(n);return new Blob([o],{type:a})},blobToFile:function(e,t){return e.lastModifiedDate=new Date,e.name=t,e},getFileName:function(e){var t=e.lastIndexOf("/");return e.substring(t+1)},xhrequest:function(e){return new Promise(function(t,a){var s=new XMLHttpRequest;s.open("get",e,!0),s.responseType="blob",s.onload=function(){var e=new window.File([this.response],"temp",{type:"image/jpeg"});t(e)},s.send()})},getUsers:function(){var e=this;this.loading=!0;var t={checked:!1,pageNum:this.pageNum};this.$http.post("/accounting/getRecordReviewed",t).then(function(t){e.users=t.data.data,console.log(e.users)}).catch(function(e){console.error(e)})},handleEdit:function(e,t){this.dialogTitle="编辑",this.user=Object.assign({},t),console.log(this.user),this.userFormVisible=!0,this.rowIndex=e,this.imgUrlToFile(this.user.photoUrl)},submitUser:function(e,t){var a=this;if(t)console.log(this.ruleForm),this.xhrequest(this.user.photoUrl).then(function(e){console.log(e);var t=new FormData;return t.append("photo",a.ruleForm.coverFile),a.$http.post("http://192.168.10.50:80/subject/photo/check",t)}).then(function(e){if(console.log(e),0==e.data.code){a.user.time.split(":")[0];var t=new FormData;return t.append("photo",a.ruleForm.coverFile),a.$http.post("http://192.168.10.50:80/subject/photo",t)}throw a.$message({type:"error",message:"审核失败!"}),"error"}).then(function(e){if(0==e.data.code){var t={name:a.user.Name,subject_type:1,start_time:Math.round(((new Date).getTime()+144e5)/1e3),end_time:Math.round(((new Date).getTime()+216e5)/1e3)};return a.$http.post("http://192.168.10.50:80/subject",t)}a.$message({type:"error",message:"审核失败!"})}).then(function(s){if(0==s.data.code){var n={_id:e,isPassed:t};return a.$http.post("/accounting/changeReviewStatus",n)}a.$message({type:"error",message:"审核失败!"})}).then(function(e){a.users=e.data.data,a.$message({type:"success",message:"审核成功!"}),a.userFormVisible=!1,console.log(a.users)}).catch(function(e){console.error(e)});else{var s={_id:e,isPassed:t,failedReason:this.failedReason};this.$http.post("/accounting/changeReviewStatus",s).then(function(e){a.$message({type:"success",message:"审核成功!"}),a.userFormVisible=!1,a.$router.go(0)})}},handleDelete:function(e,t){var a=this;this.$confirm("确定删除用户 【".concat(t.name,"】 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.users.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){console.log("取消删除")})},resetForm:function(e){this.$refs[e].clearValidate()},mulDelete:function(){var e=this,t=this.multipleSelection.length;0===t?this.$message({type:"warning",message:"请至少选择一项！"}):this.$confirm("确定删除选中的 ".concat(t," 个用户吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"成功删除了".concat(t,"条数据！")})}).catch(function(){console.log("取消删除")})},selectChange:function(e){this.multipleSelection=e},handleAdd:function(){this.dialogTitle="新增",this.user=Object.assign({},this.userBackup),this.userFormVisible=!0}}}),J=L,H=(a("b4aa"),Object(u["a"])(J,M,q,!1,null,"719283d2",null));H.options.__file="Users.vue";var W=H.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-box"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"tool-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.handleAdd}},[e._v("新增")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.mulDelete}},[e._v("批量删除")])],1)])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期",width:"180"}}),a("el-table-column",{attrs:{prop:"time",label:"时间",width:"180"}}),a("el-table-column",{attrs:{prop:"Name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"手机",width:"180"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.checked?"已审核":"未审核")+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.isPassed?"通过":"未通过")+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("查看详情")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:400}}),a("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.userFormVisible},on:{"update:visible":function(t){e.userFormVisible=t},close:function(t){e.resetForm("userForm")}}},[a("el-form",{ref:"userForm",attrs:{model:e.user,rules:e.rules}},[a("el-form-item",{attrs:{label:"照片","label-width":"100px"}},[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.user.photoUrl}})]),a("el-form-item",{attrs:{label:"姓名","label-width":"100px"}},[a("label",[e._v(e._s(e.user.Name))])]),a("el-form-item",{attrs:{label:"身份证号","label-width":"100px"}},[a("label",[e._v(e._s(e.user.IDcard))])]),a("el-form-item",{attrs:{label:"手机","label-width":"100px"}},[a("label",[e._v(e._s(e.user.phoneNum))])]),a("el-form-item",{attrs:{label:"到访日期","label-width":"100px"}},[a("label",[e._v(e._s(e.user.date))])]),a("el-form-item",{attrs:{label:"到访时间","label-width":"100px"}},[a("label",[e._v(e._s(e.user.time))])]),a("el-form-item",{attrs:{label:"到访事由","label-width":"100px"}},[a("label",[e._v(e._s(e.user.reason))])]),a("el-form-item",{attrs:{label:"状态","label-width":"100px"}},[e.user.checked?a("label",[e._v("已审核")]):a("label",[e._v("待审核")])]),a("el-form-item",{attrs:{label:"审核状态","label-width":"100px"}},[e.user.isPassed?a("label",[e._v("已通过")]):a("label",[e._v("未通过")])]),e.user.isPassed?e._e():a("el-form-item",{attrs:{label:"拒绝理由","label-width":"100px"}},[null==e.user.failedReason?a("label",[e._v("无")]):a("label",[e._v(e._s(e.user.failedReason))])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.submitUser(e.user._id,!1)}}},[e._v("不通过")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitUser(e.user._id,!0)}}},[e._v("通过")])],1)],1)],1)},Y=[],G={data:function(){return{pageNum:1,users:[],user:{id:"",date:"",name:"",phone:"",address:"",status:0},userBackup:Object.assign({},this.user),multipleSelection:[],userFormVisible:!1,dialogTitle:"",rowIndex:9999,rules:{}}},mounted:function(){this.getUsers()},methods:{xhrequest:function(e){return new Promise(function(t,a){var s=new XMLHttpRequest;s.open("get",e,!0),s.responseType="blob",s.onload=function(){var e=new window.File([this.response],"temp",{type:"image/jpeg"});t(e)},s.send()})},getUsers:function(){var e=this;this.loading=!0;var t={checked:!0,pageNum:this.pageNum};this.$http.post("/accounting/getRecordReviewed",t).then(function(t){e.users=t.data.data,console.log(e.users)}).catch(function(e){console.error(e)})},handleEdit:function(e,t){this.dialogTitle="编辑",this.user=Object.assign({},t),this.userFormVisible=!0,this.rowIndex=e},submitUser:function(e,t){var a=this;console.log(t),this.xhrequest(this.user.photoUrl).then(function(e){return a.$http.post("http://192.168.10.50:80/subject/photo/check",e)}).then(function(e){if(0==e.code){var t=60*a.user.time.split(":")[0]*60*1e3,s={photo:file,purpose:a.user.reason,name:a.user.name,subject_type:1,start_time:new Date(a.user.date)+t,end_time:new Date(a.user.date)+t+216e5,phone:a.user.phoneNum};return a.$http.post("http://192.168.10.50:80/subject/file",s)}throw a.$message({type:"error",message:"审核失败!"}),"error"}).then(function(s){var n={_id:e,isPassed:t};return a.$http.post("/accounting/changeReviewStatus",n)}).then(function(e){a.users=e.data.data,a.$message({type:"success",message:"审核成功!"}),a.userFormVisible=!1,a.$router.go(0),console.log(a.users)}).catch(function(e){console.error(e)})},handleDelete:function(e,t){var a=this;this.$confirm("确定删除用户 【".concat(t.name,"】 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.users.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){console.log("取消删除")})},resetForm:function(e){this.$refs[e].clearValidate()},mulDelete:function(){var e=this,t=this.multipleSelection.length;0===t?this.$message({type:"warning",message:"请至少选择一项！"}):this.$confirm("确定删除选中的 ".concat(t," 个用户吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"成功删除了".concat(t,"条数据！")})}).catch(function(){console.log("取消删除")})},selectChange:function(e){this.multipleSelection=e},handleAdd:function(){this.dialogTitle="新增",this.user=Object.assign({},this.userBackup),this.userFormVisible=!0}}},Z=G,K=(a("982f"),Object(u["a"])(Z,X,Y,!1,null,"2c61474c",null));K.options.__file="Articles.vue";var Q=K.exports,ee=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},te=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts-box"},[a("div",{staticClass:"echarts",attrs:{id:"echarts"}})])}],ae={mounted:function(){this.drawEcharts()},methods:{drawEcharts:function(){var e=this,t=D.a.init(document.getElementById("echarts"));P.toolbox.feature.myTool.onclick=function(){e.$message({type:"info",message:"您刚刚点击了自定义工具按钮！"})},t.setOption(P),t.on("click",function(t){e.$message({type:"info",message:"您点击了： ".concat(t.name," - ").concat(t.seriesName," - ").concat(t.data)})})}}},se=ae,ne=(a("227c"),Object(u["a"])(se,ee,te,!1,null,"6f8469fc",null));ne.options.__file="Echarts.vue";var oe=ne.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-box"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.rules}},[a("h3",{staticClass:"title"},[e._v("系 统 登 录")]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"账 号: admin","prefix-icon":"el-icon-goods"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:e.textType,autocomplete:"off",placeholder:"密 码: admin","prefix-icon":"el-icon-time"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[a("i",{staticClass:"el-input__icon el-icon-view btn-eye",attrs:{slot:"suffix"},on:{click:e.changeType},slot:"suffix"})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showMsg,expression:"showMsg"}],staticStyle:{"margin-bottom":"0"}},[a("span",{staticClass:"text-danger"},[e._v("提示：用户名或密码错误，请重试！")])]),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){e.login("loginForm")}}},[e._v("登 录")])],1)],1)],1)},ie=[],re={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:" ",trigger:"blur"}],password:[{required:!0,message:" ",trigger:"blur"}]},loading:!1,showMsg:!1,textType:"password"}},methods:{login:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("login failed"),!1;t.loading=!0,t.$http.post("/accounting/auth/login",t.loginForm).then(function(e){e=e.data,200==e.statusCode?(t.$http.interceptors.request.use(function(t){return t.headers.Authorization=e.Authorization,t},function(e){return Promise.reject(e)}),setTimeout(function(){t.loading=!1,sessionStorage.setItem("user",JSON.stringify(t.loginForm)),t.$router.replace({path:"/console"})},2e3)):(t.loading=!1,t.showMsg=!0)})})},changeType:function(){this.textType="password"===this.textType?"text":"password"}}},ce=re,ue=(a("7be0"),Object(u["a"])(ce,le,ie,!1,null,"3713185c",null));ue.options.__file="Login.vue";var de=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"not-found"},[e._v("\n  Sorry, Not Found the Page :)\n")])},me=[],he={},fe=he,be=(a("e32a"),Object(u["a"])(fe,pe,me,!1,null,"7591c26b",null));be.options.__file="NotFound.vue";var ge=be.exports;s["default"].use(m["a"]);var ve=new m["a"]({mode:"history",base:"",routes:[{path:"/login",component:de},{path:"/",component:N,children:[{path:"/console",name:"console",component:B},{path:"/users",name:"users",component:W},{path:"/articles",name:"articles",component:Q},{path:"/echarts",name:"echarts",component:oe},{path:"/404",component:ge}]},{path:"*",redirect:{path:"/404"}}]});ve.beforeEach(function(e,t,a){var s,n,o="/login";s=e.path,n=sessionStorage.getItem("user"),s===o&&sessionStorage.removeItem("user"),n||s===o?a():a({path:o})});var we=ve,ye=a("2f62");s["default"].use(ye["a"]);var _e=new ye["a"].Store({state:{isCollapse:!1},mutations:{switchCollapse:function(e){e.isCollapse=!e.isCollapse}},actions:{}}),xe=a("5c96"),Ce=a.n(xe),ke=(a("6b54"),a("f576"),a("d4ec")),Fe=a("bee2"),$e=function(){function e(){Object(ke["a"])(this,e)}return Object(Fe["a"])(e,null,[{key:"todayDate",value:function(){var e,t,a,s,n;e=new Date,t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),n=e.getDay();var o=["天","一","二","三","四","五","六"];return"".concat(t," 年 ").concat(a.toString().padStart(2,"0")," 月 ").concat(s.toString().padStart(2,"0")," 日 星期").concat(o[n])}},{key:"fullScreen",value:function(){var e=document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen;if(e){var t=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;t&&t.call(document)}else{var a=document.documentElement,s=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;s&&s.call(a)}}}]),e}(),Se=(a("3d5b"),a("0fae"),a("96eb")),je=a.n(Se),Te=je.a.Random;je.a.mock("/api/login","post",function(e){var t=JSON.parse(e.body),a=t.username,s=t.password;return"admin"===a&&"admin"===s});var Oe=function(){for(var e=[],t=0;t<10;t++){var a={id:t+1,date:Te.date("yyyy-MM-dd"),name:Te.cname(),address:je.a.mock("@county(true)"),phone:je.a.mock(/^1[0-9]{10}$/),status:Te.integer(0,1)};e.push(a)}return e};je.a.mock("/api/users",Oe);var Ne=function(){for(var e=[],t=0;t<20;t++){var a={id:t+1,date:Te.date("yyyy-MM-dd"),title:Te.csentence(),author:Te.cname(),content:Te.csentence(),status:Te.integer(0,1)};e.push(a)}return e};je.a.mock("/api/articles",Ne),s["default"].config.productionTip=!1,s["default"].use(Ce.a),o.a.interceptors.request.use(function(e){return e.withCredentials=!0,e},function(e){return Promise.reject(e)}),o.a.defaults.baseURL="http://192.168.20.134:5000",o.a.defaults.withCredentials=!0,s["default"].prototype.$http=o.a,s["default"].prototype.Utils=$e,new s["default"]({router:we,store:_e,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("5e27"),n=a.n(s);n.a},"5e27":function(e,t,a){},"64c8":function(e,t,a){},6573:function(e,t,a){"use strict";var s=a("026c"),n=a.n(s);n.a},"7be0":function(e,t,a){"use strict";var s=a("3522"),n=a.n(s);n.a},"841f":function(e,t,a){},"982f":function(e,t,a){"use strict";var s=a("0a31"),n=a.n(s);n.a},a64c:function(e,t,a){"use strict";var s=a("841f"),n=a.n(s);n.a},b4aa:function(e,t,a){"use strict";var s=a("bffd"),n=a.n(s);n.a},b640:function(e,t,a){e.exports=a.p+"img/logo.43e243a6.jpg"},bffd:function(e,t,a){},ca9c:function(e,t,a){"use strict";var s=a("2a56"),n=a.n(s);n.a},e32a:function(e,t,a){"use strict";var s=a("64c8"),n=a.n(s);n.a},f912:function(e,t,a){e.exports=a.p+"img/dakdnew.9605b36f.jpg"}});
//# sourceMappingURL=app.8f289245.js.map